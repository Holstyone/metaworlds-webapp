# MetaWorlds — журнал изменений

## 0.9.4 · 2024‑03‑22
- Локальные отладочные игроки теперь получают уникальный ID, который сохраняется в браузере.
  Благодаря этому можно открыть WebApp на двух разных устройствах (без Telegram) и честно найти друг друга в онлайне.

## 0.9.3 · 2024‑03‑21
- `/api/matchmaking` теперь ведёт очередь игроков: сервер удерживает запрос до 8 секунд, ждёт второго пилота и отвечает сразу двоим, а при таймауте подбрасывает тематического бота.
- Экран боя отображает прогресс поиска в реальном времени (без фиктивной задержки) и автоматически активирует бой, как только соперник найден.
- Если сервер недоступен, интерфейс сообщает об ошибке и позволяет мгновенно повторить поиск, не блокируя остальные элементы.

## 0.9.2 · 2024‑03‑20
- На вкладке «Бой» теперь сначала запускается поиск реального пилота: WebApp ждёт ответ от сервера, показывает статус и только после подбора активирует кнопку «Начать бой».
- Сервер получил эндпоинт `/api/matchmaking`, который отдаёт живых соперников из рейтинга (или ботов), так что карточка боя отображает реальное имя, мир и рейтинг оппонента.
- Карточка боя обновлена визуально: добавлены статусные подсказки, кнопка переподбора и динамические характеристики, завязанные на профиль пилота.

## 0.9.1 · 2024‑03‑19
- Добавлен экран «Профиль пилота» с предпросмотром, выбором аватара, девиза, тайм-зоны и расписания напоминаний — все правки автосохраняются и сразу попадают в БД.
- Настройки уведомлений и приватности теперь сохраняются вместе с миром и отображаются в инспекторе состояния.
- Карточка мира подхватывает выбранный аватар и позывной, а переключатель темы моментально меняет оформление интерфейса.

## 0.9.0 · 2024‑03‑18
- Добавлен автономный сервер на Node.js: он принимает снапшоты мира по `/api/world`, фиксирует игровые события через `/api/events`, пересоздаёт ежедневные миссии и учитывает посещённые миры.
- Сервер копит монеты, пока игрок офлайн (исходя из `profit/hour`), и сразу отправляет обновлённый баланс и актуальные миссии при следующем входе.
- Рейтинг и позиции TOP теперь вычисляются на сервере, а WebApp запрашивает реальное значение и отображает его на главном экране и в карточке боя.

## 0.8.6 · 2024‑03‑16
- Появилась панель «Мониторинг данных»: можно разворачивать карточку и смотреть текущее состояние фронтенда, последний снапшот, а также содержимое localStorage/CloudStorage.
- Добавлены ручные кнопки обновления снимка и пометки статуса, чтобы быстрее диагностировать проблемы с синхронизацией.

## 0.8.0 · 2024‑03‑14
- Веб‑клиент научился сохранять мир локально и в Telegram CloudStorage, а также отправлять снапшоты боту через `tg.sendData` при каждом значимом событии.
- Реализована пошаговая генерация миссий дня, простые бои и выбор архетипа, чтобы первый запуск мира был полноценным игровым циклом.
